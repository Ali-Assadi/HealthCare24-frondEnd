<!-- Updated Cart + Orders View -->
<body>
<!-- Updated Cart + Orders View with Working PDF -->
<div *ngIf="cart && cart.items.length > 0; else emptyCart" class="cart-wrapper">
  <h2>Your Cart</h2>
  <div *ngFor="let item of cart.items" class="cart-item">
    <p><strong>{{ item.productId.name }}</strong></p>
    <p>Quantity: {{ item.quantity }}</p>
    <p>Price: ${{ item.price }}</p>
    <button class="remove-btn" (click)="removeItem(item.productId._id)">Remove</button>
  </div>
  <hr />
  <div class="cart-summary">
    <p><strong>Total: ${{ cart.totalPrice }}</strong></p>
    <div class="cart-buttons">
      <button class="clear-btn" (click)="clearCart()">Clear Cart</button>
      <button class="purchase-btn" (click)="purchase()">Purchase</button>
    </div>
  </div>
</div>

<ng-template #emptyCart>
  <p class="empty-msg">ðŸ›’ Your cart is empty.</p>
</ng-template>

<hr />

<div class="orders-wrapper">
  <h2>ðŸ§¾ My Orders</h2>
  <div *ngIf="orders.length === 0">
    <p>You have no orders yet.</p>
  </div>

  <div *ngFor="let order of orders" class="order-box">
    <div class="order-header">
      <p><strong>Order ID:</strong> {{ order._id }}</p>
      <p><strong>Date:</strong> {{ order.createdAt | date: 'medium' }}</p>
      <p><strong>Status:</strong> {{ order.status }}</p>
    </div>

    <div class="order-items">
      <ul>
        <li *ngFor="let item of order.items">
          {{ item.productId.name }} - ${{ item.price }} Ã— {{ item.quantity }}
        </li>
      </ul>
    </div>

    <p class="order-total"><strong>Total: ${{ order.totalPrice }}</strong></p>

    <div class="order-actions">
      <button (click)="downloadReceipt(order)">Download Receipt (PDF)</button>
    </div>
  </div>
</div>

<!-- Script tag for jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>