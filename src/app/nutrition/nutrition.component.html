<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food & Nutrition</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <!-- Header Section -->
    <div class="head" id="header">
      <img class="head-img" src="assets/nutrition/head-bg.png" />
      <div class="head-text">
        <h1 class="head-text-h1">Food & Nutrition</h1>
      </div>
    </div>
    <!-- Diet Plan Actions -->
    <section *ngIf="isLoggedIn" class="plan-actions-section my-5">
      <div class="container text-center">
        <h2 class="mb-4 fw-bold">ðŸ“‹ Your Personal Diet Journey</h2>
        <p class="text-muted">
          Stay on track and take control of your health goals
        </p>

        <div
          class="action-buttons mt-4 d-flex flex-wrap justify-content-center gap-3"
        >
          <button
            class="btn btn-generate-plan"
            *ngIf="!hasPlan"
            routerLink="/diet-plan"
          >
            Generate My Diet Plan ðŸ’ª
          </button>

          <button
            class="btn btn-request-plan"
            *ngIf="hasPlan"
            (click)="requestNewPlan()"
          >
            Request New Plan from Admin ðŸ“¨
          </button>

          <button
            class="btn btn-view-plan"
            *ngIf="hasPlan"
            routerLink="/my-dietPlan"
          >
            View My Diet Plan ðŸ“‹
          </button>
        </div>
      </div>
    </section>

    <!-- Healthy Meals Section -->
    <section
      id="healthy-meals"
      class="healthy-meals"
      *ngFor="let meal of meals"
      [routerLink]="[meal.route]"
    >
      <div class="text-container">
        <h3>HEALTHY MEALS</h3>
        <div class="underline"></div>
        <h2 class="fade-in" #fadeElement appFadeIn>{{ meal.title }}</h2>
      </div>
      <div class="image-container">
        <img
          [src]="meal.image"
          [alt]="meal.title"
          (click)="logView(meal.route, 'meals')"
        />
      </div>
    </section>

    <!-- Diets Section -->
    <section id="diets" class="diets fade-in" #fadeElement appFadeIn>
      <div class="text-container">
        <h3>DIETS</h3>
        <div class="underline"></div>
        <h2>
          From keto to the Mediterranean diet, experts share insights into the
          latest diets.
        </h2>
      </div>
      <div class="diet-grid">
        <div
          class="diet-item fade-in"
          *ngFor="let diet of diets"
          [routerLink]="[diet.route]"
          (click)="logView(diet.route, 'diets')"
          #fadeElement
          appFadeIn
        >
          <img [src]="diet.image" [alt]="diet.title" />
          <p>
            <strong>{{ diet.title }}</strong>
          </p>
        </div>
      </div>
    </section>

    <section
      *ngIf="isLoggedIn"
      class="product-section fade-in"
      #fadeElement
      appFadeIn
    >
      <div class="text-container">
        <h3>Nutrition Products</h3>
        <div class="underline"></div>
        <div class="product-grid">
          <div
            class="product-card fade-in"
            *ngFor="let product of products"
            #fadeElement
            appFadeIn
          >
            <img [src]="product.image" [alt]="product.name" />
            <h4>{{ product.name }}</h4>
            <p>{{ product.description }}</p>
            <p>
              <strong *ngIf="subscribed">
                ${{ product.price }}
                <span class="original-price">${{ product.originalPrice }}</span>
              </strong>
              <strong *ngIf="!subscribed"> ${{ product.price }} </strong>
            </p>

            <button
              class="btn btn-sm btn-outline-success"
              (click)="addToCart(product)"
            >
              ðŸ›’ Add to Cart
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              (click)="buyNow(product)"
            >
              ðŸ’³ Buy Now
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Healthy Recipes Section -->
    <section
      id="healthy-recipes"
      class="healthy-recipes fade-in"
      #fadeElement
      appFadeIn
    >
      <div class="text-container">
        <h3>HEALTHY RECIPES</h3>
        <div class="underline"></div>
        <h2>
          Our test kitchen-created healthy recipes are sure to hit the spot.
        </h2>
        <div class="recipe-grid">
          <div
            class="recipe-item fade-in"
            *ngFor="let recipe of recipes"
            [routerLink]="[recipe.route]"
            (click)="logView(recipe.route, 'recipes')"
            #fadeElement
            appFadeIn
          >
            <img [src]="recipe.image" [alt]="recipe.title" />
            <p>
              <strong>{{ recipe.title }}</strong>
            </p>
          </div>
        </div>
      </div>
    </section>

    <app-footer></app-footer>
  </body>
</html>
