<div class="plan-container-nutrition text-center">
  <h2>ğŸ½ï¸ Personalized Diet Plan Generator</h2>

  <!-- ğŸ‘¤ User Info -->
  <div class="user-info mb-3" *ngIf="bmiValue">
    <p>
      <strong>BMI:</strong> {{ bmiValue }} | <strong>Recommended Goal:</strong>
      {{ userGoal | titlecase }}
    </p>
  </div>

  <!-- ğŸ¯ Goal Selection -->
  <div class="select-goal mb-4">
    <label for="goal">Choose Your Goal:</label>
    <select id="goal" [(ngModel)]="userGoal" class="form-select mt-2" required>
      <option value="gain">Gain Muscle</option>
      <option value="balance">Balanced</option>
      <option value="loss">Lose Weight</option>
    </select>
  </div>

  <!-- ğŸš« Restrictions -->
  <div class="restrictions-section mb-4">
    <p><strong>Any Restriction?</strong> (Choose one)</p>

    <div class="restriction-checkboxes">
      <label
        *ngFor="let entry of restrictions | keyvalue"
        class="checkbox-label"
      >
        <input
          #cb
          type="checkbox"
          [checked]="restrictions[entry.key]"
          (change)="
            restrictions['egg'] = false;
            restrictions['milk'] = false;
            restrictions['meat'] = false;
            restrictions['fish'] = false;
            restrictions['gluten'] = false;
            restrictions['vegetarian'] = false;
            restrictions[entry.key] = cb.checked
          "
        />
        <span>
          {{
            entry.key === "vegetarian"
              ? "Vegetarian"
              : "No " + (entry.key | titlecase)
          }}
        </span>
      </label>
    </div>
  </div>

  <!-- ğŸ”˜ Generate Button -->
  <button
    class="btn-generate-nutrition mt-2"
    (click)="generatePlan()"
    [disabled]="!userGoal || loading"
  >
    {{ loading ? "Generating..." : "Generate Plan ğŸš€" }}
  </button>

  <!-- â³ Loading -->
  <div *ngIf="loading" class="loading-message mt-3">
    <div class="spinner"></div>
    <p>Please wait... Preparing your personalized meal plan.</p>
  </div>
</div>
