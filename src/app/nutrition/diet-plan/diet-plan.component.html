<div class="plan-container-nutrition text-center">
  <h2>ğŸ¯ Generate Your Personalized Diet Plan</h2>

  <!-- Goal Selector -->
  <div *ngIf="!hideGoalSelector" class="select-goal mb-4">
    <label for="goal" class="form-label">Choose Your Goal:</label>
    <select [(ngModel)]="userGoal" name="goal" id="goal" class="form-select my-2" required>
      <option value="" disabled selected>Select your goal</option>
      <option value="loss">Lose Weight</option>
      <option value="gain">Gain Muscle</option>
      <option value="balance">Balanced</option>
    </select>

    <button class="btn-generate-nutrition mt-3" (click)="generatePlan()" [disabled]="!userGoal">
      {{ loading ? 'Generating...' : 'Generate Plan ğŸš€' }}
    </button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-message">
    <div class="spinner"></div>
    <p class="text-muted">Generating your diet plan... Please wait.</p>
  </div>

  <!-- Plan Output -->
  <div *ngIf="showPlan" class="generated-plan">
    <h4 class="goal-title mb-2">Goal: {{ userGoal | titlecase }}</h4>
    <p class="goal-info mb-4">
      <strong>Height:</strong> {{ userInfo.height }} cm &nbsp;|&nbsp;
      <strong>Weight:</strong> {{ userInfo.weight }} kg
    </p>

    <div *ngFor="let week of generatedPlans; let wi = index" class="week-card-nutrition">
      <h5>ğŸ“… Week {{ wi + 1 }}</h5>

      <div *ngFor="let day of week.days; let di = index" class="day-block-nutrition">
        <h6>ğŸ½ï¸ Day {{ di + 1 }}</h6>
        <ul>
          <li><strong>Breakfast:</strong> {{ day.breakfast }}</li>
          <li><strong>Lunch:</strong> {{ day.lunch }}</li>
          <li><strong>Dinner:</strong> {{ day.dinner }}</li>
          <li *ngIf="day.snack"><strong>Snack:</strong> {{ day.snack }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
