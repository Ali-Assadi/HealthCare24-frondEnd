<div class="exercise-container" *ngIf="!loading">
  <h2 class="goal-title">ğŸ‹ï¸ Your Exercise Plan - Goal: {{ goal | titlecase }}</h2>

  <!-- Congratulations Message -->
  <div *ngIf="showCongratulations" class="congrats-message">
    ğŸ‰ Congratulations! You've completed your entire exercise plan! ğŸ‰
  </div>
  <div class="restart-container text-center" >
    <button class="btn-restart" (click)="restartPlan()">
      ğŸ”„ Restart Exercise Plan
    </button>
  </div>
  
  <div class="download-container text-center mt-4">
    <button class="btn-download" (click)="downloadExcel()">
      ğŸ“¥ Download Exercise Plan as Excel
    </button>
  </div>
  
  <!-- Progress Bar -->
  <div class="progress-container">
    <p>Progress: {{ completedDays }}/{{ totalDays }} Days Completed ({{ progressPercent }}%) âœ…</p>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progressPercent"></div>
    </div>
  </div>

  <div *ngFor="let week of exercisePlan; let w = index" class="week-box">
    <h4>Week {{ w + 1 }}</h4>

    <div *ngFor="let day of week.days; let d = index" class="day-box" [ngClass]="{ 'day-finished': day.finished }">
      <strong>Day {{ day.day }}:</strong>
      <span class="type-label">{{ day.type }}</span>
      <p>{{ day.workout }}</p>

      <div class="day-actions">
        <button *ngIf="!day.finished" class="btn-finish" (click)="markDayFinished(w, d)">
          âœ… Mark as Finished
        </button>
        <div *ngIf="day.finished" class="finished-label">
          ğŸ‰ Completed!
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loading" class="loading-text">Loading your plan...</div>
